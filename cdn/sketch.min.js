var Sketch=function(){function e(e,n){for(var t in n)e.hasOwnProperty(t)||(e[t]=n[t]);return e}function n(e){function n(e,n){return function(){e.call(n,arguments)}}var t={};for(var o in e)t[o]="function"==typeof e[o]?n(e[o],e):e[o];return t}function t(e,n){e.length=0;for(var t=0,o=n.length;o>t;t++)e[t]=n[t];return e}function o(){function e(e){return c[e]||String.fromCharCode(e)}function o(e){i.mouse.ox=i.mouse.x,i.mouse.oy=i.mouse.y,i.mouse.x=e.x,i.mouse.y=e.y,i.mouse.dx=i.mouse.x-i.mouse.ox,i.mouse.dy=i.mouse.y-i.mouse.oy}function a(e){var t,o=n(e);o.original=e;for(var a=i.canvas,u=0,s=0;a;a=a.offsetParent)u+=a.offsetLeft,s+=a.offsetTop;if(o.touches&&o.touches.length)for(var r,c=o.touches.length-1;c>=0;c--)(r=o.touches[c]).x=r.pageX-u,r.y=r.pageY-s,t=d[c]||r,r.dx=r.x-t.x,r.dy=r.y-t.x,r.ox=t.x,r.oy=t.y,d[c]=n(r);else o.x=o.pageX-u,o.y=o.pageY-s,t=d.mouse||o,o.dx=o.x-t.x,o.dy=o.y-t.y,o.ox=t.x,o.oy=t.y,d.mouse=o;return o}function s(e){o(e=a(e)),t(i.touches,[e]),i.touchmove&&i.touchmove(e),i.mousemove&&i.mousemove(e)}function r(e){e=a(e),i.dragging&&(g(document,"mousemove",s),g(document,"mouseup",r),y(i.canvas,"mousemove",s),y(i.canvas,"mouseup",r),i.dragging=!1),delete d.mouse,i.touchend&&i.touchend(e),i.mouseup&&i.mouseup(e)}var c={8:"BACKSPACE",9:"TAB",13:"ENTER",16:"SHIFT",27:"ESCAPE",32:"SPACE",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN"};for(var m in c)p.keys[c[m]]=!1;var d={};y(i.canvas,"touchstart",(function(e){e.preventDefault(),e=a(e),t(i.touches,e.touches),o(i.touches[0]),i.touchstart&&i.touchstart(e),i.mousedown&&i.mousedown(e)})),y(i.canvas,"touchmove",(function(e){e=a(e),t(i.touches,e.touches),o(i.touches[0]),i.touchmove&&i.touchmove(e),i.mousemove&&i.mousemove(e)})),y(i.canvas,"touchend",(function(e){if((e=a(e)).touches.length)for(var n in d)e.touches[n]||delete d[n];else d={};i.touchend&&i.touchend(e),i.mouseup&&i.mouseup(e)})),y(i.canvas,"mouseover",(function(e){e=a(e),i.mouseover&&i.mouseover(e)})),y(i.canvas,"mousedown",(function(e){e=a(e),i.dragging||(g(i.canvas,"mousemove",s),g(i.canvas,"mouseup",r),y(document,"mousemove",s),y(document,"mouseup",r),i.dragging=!0),t(i.touches,[e]),i.touchstart&&i.touchstart(e),i.mousedown&&i.mousedown(e)})),y(i.canvas,"mousemove",s),y(i.canvas,"mouseout",(function(e){e=a(e),i.mouseout&&i.mouseout(e)})),y(i.canvas,"mouseup",r),y(i.canvas,"click",(function(e){e=a(e),i.click&&i.click(e)})),y(document,"keydown",(function(n){i.keys[e(n.keyCode)]=!0,i.keys[n.keyCode]=!0,i.keydown&&i.keydown(n)})),y(document,"keyup",(function(n){i.keys[e(n.keyCode)]=!1,i.keys[n.keyCode]=!1,i.keyup&&i.keyup(n)})),y(window,"resize",u)}function a(){if(!d){var e=Date.now();i.dt=e-i.now,i.millis+=i.dt,i.now=e,i.update&&i.update(i.dt),i.autoclear&&i.clear(),i.draw&&i.draw(i)}d=++d%i.interval,h=requestAnimationFrame(a)}function u(){if(i.autoresize){var e=i.type===m?i.style:i.canvas;i.fullscreen?(i.height=e.height=window.innerHeight,i.width=e.width=window.innerWidth):(e.height=i.height,e.width=i.width),i.resize&&i.resize()}}var i,s=0,r="canvas",c="web-gl",m="dom",d=0,h=-1,f={},v=[],w={fullscreen:!0,autostart:!0,autoclear:!0,autopause:!0,autoresize:!0,container:document.body,interval:1,type:r},l={PI:Math.PI,TWO_PI:2*Math.PI,HALF_PI:Math.PI/2,QUARTER_PI:Math.PI/4,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan2:Math.atan2,atan:Math.atan,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,random:function(e,n){return e&&"number"==typeof e.length&&e.length?e[Math.floor(Math.random()*e.length)]:("number"!=typeof n&&(n=e||1,e=0),e+Math.random()*(n-e))}},p={millis:0,now:NaN,dt:NaN,keys:{},mouse:{x:0,y:0,ox:0,oy:0,dx:0,dy:0},touches:[],initialized:!1,dragging:!1,running:!1,start:function(){i.running||(i.setup&&!i.initialized&&(i.autopause&&(y(window,"focus",i.start),y(window,"blur",i.stop)),i.setup()),i.initialized=!0,i.running=!0,i.now=Date.now(),a())},stop:function(){cancelAnimationFrame(h),i.running=!1},toggle:function(){(i.running?i.stop:i.start)()},clear:function(){i.canvas&&(i.canvas.width=i.canvas.width)},destroy:function(){var e,n,t,o,a,u;for(n in v.splice(v.indexOf(i),1),i.stop(),f){for(a=0,u=(t=f[n]).length;u>a;a++)e=t[a],g(e.el,n,e.fn);delete f[n]}for(o in i.container.removeChild(i.canvas),i)i.hasOwnProperty(o)&&delete i[o]}},y=function(){function e(e,n,t){f[n]||(f[n]=[]),f[n].push({el:e,fn:t})}return window.addEventListener?function(n,t,o){n.addEventListener(t,o,!1),e(n,t,o)}:window.attachEvent?function(n,t,o){n.attachEvent("on"+t,o),e(n,t,o)}:function(n,t,o){n["on"+t]=o,e(n,t,o)}}(),g=function(){function e(e,n,t){if(f[n])for(var o,a=f[n].length-1;a>=0;a--)(o=f[n][a]).el===e&&o.fn===t&&f[n].splice(a,1)}return window.removeEventListener?function(n,t,o){n.removeEventListener(t,o,!1),e(n,t,o)}:window.detachEvent?function(n,t,o){n.detachEvent("on"+t,o),e(n,t,o)}:(el["on"+ev]=null,void e(el,ev,fn))}();return{CANVAS:r,WEB_GL:c,DOM:m,instances:v,create:function(n){n=e(n||{},w);var t="sketch-"+s++,a=n.hasOwnProperty("canvas"),m=a?n.canvas:document.createElement("canvas");switch(n.type){case c:try{i=m.getContext("webgl",n)}catch(e){}try{i=i||m.getContext("experimental-webgl",n)}catch(e){}if(!i)throw"WebGL not supported";break;case r:try{i=m.getContext("2d",n)}catch(e){}if(!i)throw"Canvas not supported";break;default:m=i=document.createElement("div")}return i.canvas=m,m.className="sketch",a?n.autoresize=!1:(n.container.appendChild(m),n.hasOwnProperty("autoresize")||(n.autoresize=w.autoresize),m.id=t),e(self,l),e(i,n),e(i,p),o(),n.autoresize&&u(),v.push(i),i.autostart&&setTimeout(i.start,0),i}}}();Date.now||(Date.now=function(){return+new Date}),function(){for(var e=0,n=["ms","moz","webkit","o"],t=0;n.length>t&&!window.requestAnimationFrame;++t)window.requestAnimationFrame=window[n[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n[t]+"CancelAnimationFrame"]||window[n[t]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=Date.now(),o=Math.max(0,16-(t-e)),a=window.setTimeout((function(){n(t+o)}),o);return e=t+o,a}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}();