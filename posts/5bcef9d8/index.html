<!DOCTYPE html><html><head><script>(()=>{let r=navigator.serviceWorker,e=()=>console.error("ServiceWorker 注册失败，可能是您的浏览器不支持该功能。");r?.register("/sw.js")?.catch(e)||e()})()</script><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="msvalidate.01" content="A7B4DB5A7BF5E5C6E52E34BB024D6319"><meta name="description" content=""><meta http-equiv="content-language" content="zh-cn"><title>【出题】恼人的英语课 | 星澜曦光的探索</title><script src="/cdn/jquery.min.js"></script><script src="/cdn/anime.min.js"></script><script src="/cdn/jquery.pjax.min.js"></script><script src="/cdn/highlight.min.js"></script><script src="/cdn/sweetalert2.all.min.js"></script><script src="/cdn/sketch.min.js"></script><script src="/cdn/bootstrap.bundle.min.js"></script><script src="/cdn/tocbot.min.js"></script><script src="/js/chaffle.js"></script><script src="/js/main.js"></script><script src="/js/search.js"></script><script src="/js/initial.js"></script><script src="/js/busuanzi.js"></script><link rel="stylesheet" href="/cdn/katex.min.css"><link rel="stylesheet" href="/cdn/font-awesome/css/font-awesome.css"><link rel="stylesheet" href="/cdn/vs2015.min.css"><link rel="stylesheet" href="/cdn/bootstrap.min.css"><link rel="stylesheet" href="/cdn/tocbot.css"><link rel="stylesheet" href="/css/style.css"><style>@import url("/fonts/CEFFontsCJK-Regular/result.css");</style><script defer src="/sw-dom.js"></script><link rel="stylesheet" href="/cdn/font-awesome-animation.min.css" media="defer" onload='this.media="all"'><link rel="stylesheet" href="/cdn/tag_plugins.css" media="defer" onload='this.media="all"'><script src="/cdn/carousel-touch.js"></script><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="星澜曦光的探索" type="application/atom+xml"></head><body style="background-image:url(/img/new-bgp.avif)"><div id="YurLoading" class="YurLoading"><div class="inner"><div class="line-wrap"><div class="line"></div></div><div class="line-wrap"><div class="line"></div></div><div class="line-wrap"><div class="line"></div></div><div class="line-wrap"><div class="line"></div></div><div class="line-wrap"><div class="line"></div></div></div></div><div class="topbar"><a onclick="topbarToggle()" class="topbar-menu" style="cursor:pointer"><i class="fa fa-bars"></i></a><a href="/" class="topbar-title"><i class="fa fa-home"></i> 星澜曦光的探索</a><a target="_blank" rel="noopener" href="https://github.com/tsxc-github" class="topbar-title"><i class="fa fa-github"></i></a></div><div id="article-container"><div class="sidebar"><div class="avatar-container"><img src="/img/avatar.avif" class="avatar revolve"></div><div class="sidebar-author">星澜曦光<br><span class="mini-text">AFO，新的开始</span></div><div class="sidebar-list-container"><div style="height:10px"></div><a class="list-group-item" href="/"><div><i class="fa fa-home fa-fw"></i>&nbsp; 首页</div></a><a class="list-group-item" href="/archives/"><div><i class="fa fa-tasks fa-fw"></i>&nbsp; 归档</div><div class="badge">9</div></a><a class="list-group-item" href="/tags/"><div><i class="fa fa-tags fa-fw"></i>&nbsp; 标签</div><div class="badge">9</div></a><a class="list-group-item" href="/categories/"><div><i class="fa fa-th-large fa-fw"></i>&nbsp; 分类</div><div class="badge">9</div></a><a class="list-group-item" href="/somepage/about/"><div><i class="fa fa-user-o fa-fw"></i>&nbsp; 关于</div></a><a class="list-group-item" href="/somepage/link/"><div><i class="fa fa-link fa-fw"></i>&nbsp; 友链</div></a><a class="list-group-item" href="/somepage/settings/"><div><i class="fa fa-cog fa-fw"></i>&nbsp; 设置</div></a><a class="list-group-item" href="/link/"><div><i class="fa fa-fw"></i>&nbsp; 导航页</div></a><div style="height:200px"></div></div><div class="sidebar-footer"><div class="item" id="back2Top" data-bs-toggle="tooltip" title="顶部"><i class="fa fa-arrow-circle-up"></i></div><div class="item" id="back2Down" data-bs-toggle="tooltip" title="底部"><i class="fa fa-arrow-circle-down"></i></div><div class="item" data-bs-toggle="tooltip" title="RSS"><a href="/atom.xml"><i class="fa fa-feed"></i></a></div><div class="item" data-bs-toggle="tooltip" title="搜索"><a href="/somepage/search/"><i class="fa fa-search"></i></a></div></div></div><div class="article"><div class="vertical fake-sidebar"></div><div class="vertical post"><div class="header"><h1 class="title">【出题】恼人的英语课</h1><div class="meta"><span><i class="fa fa-user-o"></i> 星澜曦光</span><span><i class="fa fa-clock-o"></i> 2023-11-19, 11:22</span><span><i class="fa fa-font"></i> 1.4k</span><span class="hideBars" onclick="hideBars()"><i class="fa fa-eye-slash"></i> 隐藏左右两栏</span><span class="showBars" onclick="showBars()"><i class="fa fa-eye"></i> 展示左右两栏</span></div></div><div class="breadcrumb"><div class="url"><a href="/"><i class="fa fa-home"></i> 首页</a> / 【出题】恼人的英语课</div><div class="share">分享到<a target="_blank" rel="noopener" href="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https://blog.tsxc.xyz/posts/5bcef9d8/&amp;title=【出题】恼人的英语课&amp;site=https://blog.tsxc.xyz"><i class="fa fa-qq"></i></a></div></div><div class="post-text"><div id="postchat_postcontent"><p>这道题是<a target="_blank" rel="noopener" href="https://www.luogu.com.cn/user/643012"><strong>@Xiao_Xiao_Yu</strong></a>的原创题目，由<a target="_blank" rel="noopener" href="https://www.luogu.com.cn/user/578142"><strong>@tsxc</strong></a>进行部分修改与数据制造（还没造完）</p><p>此题可在<a target="_blank" rel="noopener" href="https://www.luogu.com.cn/problem/U383646">U383646 英语课 - 洛谷 | 计算机科学教育新生态</a>查看</p><details class="folding-tag" green=""><summary>题面</summary><div class="content"><h1 id="英语课"><a class="markdownIt-Anchor" href="#英语课"></a> 英语课</h1><h2 id="题目背景"><a class="markdownIt-Anchor" href="#题目背景"></a> 题目背景</h2><p>声明：本题目中出现的人物与现实中人物无任何联系。</p><h2 id="题目描述"><a class="markdownIt-Anchor" href="#题目描述"></a> 题目描述</h2><p>你的英语老师 CHY 采用一种独特的课堂提问方式。每次英语课时，她将先指定一名同学开始提问，此后的每个提问对象都由上一名被提问的同学指定。</p><p>由于被提问是令人不高兴的事情，当一名同学被提问时（被老师提问除外），他会对选择他提问的同学产生一定的仇恨度，同时选择提问他的同学对他会减少相同的仇恨度。具体来说，同学编号为从<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.64444em;vertical-align:0"></span><span class="mord">1</span></span></span></span> 到<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.43056em;vertical-align:0"></span><span class="mord mathnormal">n</span></span></span></span>，当同学<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.43056em;vertical-align:0"></span><span class="mord mathnormal">a</span></span></span></span> 选择下一个提问同学<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord mathnormal">b</span></span></span></span> 时，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord mathnormal">b</span></span></span></span> 对<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.43056em;vertical-align:0"></span><span class="mord mathnormal">a</span></span></span></span> 将增加<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>⊕</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">a \oplus b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.66666em;vertical-align:-.08333em"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">⊕</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord mathnormal">b</span></span></span></span> 的仇恨度，同时<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.43056em;vertical-align:0"></span><span class="mord mathnormal">a</span></span></span></span> 对<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord mathnormal">b</span></span></span></span> 将减少<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>⊕</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">a \oplus b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.66666em;vertical-align:-.08333em"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">⊕</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord mathnormal">b</span></span></span></span> 的仇恨度，其中<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>“</mtext><mo>⊕</mo><mtext>”</mtext></mrow><annotation encoding="application/x-tex">“\oplus”</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.77777em;vertical-align:-.08333em"></span><span class="mord">“</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">⊕</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord">”</span></span></span></span>表示按位异或运算。</p><p>英语老师也考虑到了仇恨的问题，因此她规定从第二个被提问的同学开始，每个同学都不能提问上一个被提问的同学，但并不阻止经过一系列提问后再回到某个提问过的同学。</p><p>经过了不知道多少次的提问与被提问，几乎所有同学之间都有着不同程度的仇恨。你班级里的每个同学都绝对理智，每个人都会在尽可能避免自己被再次提问（或尽可能延长到下次被提问的时间）的前提下，优先提问自己最仇恨的同学。</p><p>身为英语课代表的 BabyFalse 非常好奇，如果下一节英语课英语老师第<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.64444em;vertical-align:0"></span><span class="mord">1</span></span></span></span> 次提问每个同学都分别会发生什么。他线下调查了每个同学之间的仇恨关系，希望你来完成预测工作。不过，他没有直接把调查结果给你，而是一条一条地将仇恨关系告诉你，并且随时可能询问你在当前状态下如果第<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.64444em;vertical-align:0"></span><span class="mord">1</span></span></span></span> 个提问某位同学，那么第<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord mathnormal" style="margin-right:.03148em">k</span></span></span></span> 个被提问的同学将会是谁，仇恨关系未知时默认双方的仇恨度均为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.64444em;vertical-align:0"></span><span class="mord">0</span></span></span></span>，<strong>给出的仇恨度可能是负数</strong>。</p><h2 id="输入格式"><a class="markdownIt-Anchor" href="#输入格式"></a> 输入格式</h2><p>输入的第一行包含两个正整数<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo separator="true">,</mo><mi>m</mi></mrow><annotation encoding="application/x-tex">n,m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.625em;vertical-align:-.19444em"></span><span class="mord mathnormal">n</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mord mathnormal">m</span></span></span></span>，分别表示班上的同学数和仇恨关系的条数。</p><p>接下来<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.43056em;vertical-align:0"></span><span class="mord mathnormal">m</span></span></span></span> 行，每行格式为以下两种之一：</p><p>四个整数<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo separator="true">,</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo separator="true">,</mo><mi>c</mi></mrow><annotation encoding="application/x-tex">1,a,b,c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8888799999999999em;vertical-align:-.19444em"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mord mathnormal">b</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mord mathnormal">c</span></span></span></span>，表示同学<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.43056em;vertical-align:0"></span><span class="mord mathnormal">a</span></span></span></span> 对同学<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord mathnormal">b</span></span></span></span> 有着<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi></mrow><annotation encoding="application/x-tex">c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.43056em;vertical-align:0"></span><span class="mord mathnormal">c</span></span></span></span> 的仇恨度。</p><p>三个整数<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mo separator="true">,</mo><mi>x</mi><mo separator="true">,</mo><mi>k</mi></mrow><annotation encoding="application/x-tex">2,x,k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8888799999999999em;vertical-align:-.19444em"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mord mathnormal" style="margin-right:.03148em">k</span></span></span></span>，表示询问只考虑目前给出的仇恨关系时，若第一个提问同学<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.43056em;vertical-align:0"></span><span class="mord mathnormal">x</span></span></span></span>，第<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord mathnormal" style="margin-right:.03148em">k</span></span></span></span> 个被提问的同学的编号。</p><h2 id="输出格式"><a class="markdownIt-Anchor" href="#输出格式"></a> 输出格式</h2><p>对于每个询问，输出一行一个整数，表示答案。</p><h2 id="样例-1"><a class="markdownIt-Anchor" href="#样例-1"></a> 样例 #1</h2><h3 id="样例输入-1"><a class="markdownIt-Anchor" href="#样例输入-1"></a> 样例输入 #1</h3><pre><code class="highlight plaintext">4 6
1 0 1 1
1 2 3 114
2 0 1
2 0 2
2 0 3
2 0 4</code></pre><h3 id="样例输出-1"><a class="markdownIt-Anchor" href="#样例输出-1"></a> 样例输出 #1</h3><pre><code class="highlight plaintext">0 1 2 3</code></pre><h2 id="提示"><a class="markdownIt-Anchor" href="#提示"></a> 提示</h2><p>对于"尽可能避免自己被再次提问（或尽可能延长到下次被提问的时间）"，计算到第<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord mathnormal" style="margin-right:.03148em">k</span></span></span></span>个被提问的同学截止。</p><p><strong>【数据范围】</strong></p><p>对于所有测试数据，保证不会给出两条仇恨者与被仇恨者都相同的仇恨关系。</p></div></details><details class="folding-tag"><summary>示例代码</summary><div class="content"><p>并没有想出什么比较好的解法，就写了个暴力。欢迎大家提供更好的解法！</p><pre><code class="highlight cpp"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span>
<span class="keyword">using</span> <span class="keyword">namespace</span> std;
<span class="meta">#<span class="keyword">define</span> LL long long</span>
<span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>{
    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);
    cin.<span class="built_in">tie</span>(<span class="number">0</span>),cout.<span class="built_in">tie</span>(<span class="number">0</span>);

    <span class="comment">// freopen("xiao_xiao_yu.in","r",stdin);</span>

    LL n,m,q;
    cin&gt;&gt;n&gt;&gt;m;
    vector&lt;vector&lt;LL&gt;&gt;<span class="built_in">stu</span>(n,<span class="built_in">vector</span>&lt;LL&gt;(n,<span class="number">0</span>));<span class="comment">//仇恨度</span>
    <span class="keyword">while</span>(m--){
        LL opt;
        cin&gt;&gt;opt;
        <span class="keyword">if</span>(opt==<span class="number">1</span>){
            LL a,b,c;
            cin&gt;&gt;a&gt;&gt;b&gt;&gt;c;
            stu[a][b]=c;
        }<span class="keyword">else</span> <span class="keyword">if</span>(opt==<span class="number">2</span>){
            LL x,k;
            cin&gt;&gt;x&gt;&gt;k;
            function&lt;pair&lt;LL,vector&lt;LL&gt;&gt;(LL,LL,LL)&gt;dfs=
                [&amp;](LL node<span class="comment">/*当前节点*/</span>,LL now<span class="comment">/*搜索深度*/</span>,LL father<span class="comment">/*上一个节点*/</span>)-&gt;pair&lt;LL,vector&lt;LL&gt;&gt;{ 
                <span class="comment">//pair&lt;LL,vector&lt;LL&gt;&gt;:ans,time</span>
                <span class="keyword">if</span>(now&gt;=k){ <span class="comment">//当到达最后一层(即搜到答案)</span>
                    <span class="keyword">return</span> {node,<span class="built_in">vector</span>&lt;LL&gt;(n,LONG_LONG_MAX/<span class="number">2</span>)<span class="comment">/*从这个节点到任何节点的时间都是INF*/</span>};
                }
                LL minest=<span class="number">-1</span>;<span class="comment">//下一个最佳抽问人</span>
                LL minestnum=<span class="number">0</span>;<span class="comment">//最后一个被抽问的(即ans)</span>
                vector&lt;LL&gt; minesttime;<span class="comment">//如果选择下一个抽问人到达每一个节点的时间</span>
                LL minestcnm=LONG_LONG_MIN;<span class="comment">//仇恨度</span>
                <span class="keyword">for</span>(LL i=<span class="number">0</span>;i&lt;n;i++){
                    <span class="keyword">if</span>(i==father||node==i){<span class="comment">//抽问上一位和自己无效</span>
                        <span class="keyword">continue</span>;
                    }
                    <span class="comment">//加上仇恨度</span>
                    stu[node][i]-=node^i;
                    stu[i][node]+=node^i;
                    pair&lt;LL,vector&lt;LL&gt;&gt;p=<span class="built_in">dfs</span>(i,now<span class="number">+1</span>,node);
                    <span class="comment">//还原仇恨度</span>
                    stu[node][i]+=node^i;
                    stu[i][node]-=node^i;
                    <span class="keyword">if</span>(minest==<span class="number">-1</span>||p.second[node]&gt;minesttime[node]){<span class="comment">//当接下来抽到自己的时间要小于"最佳抽问人"时，换人</span>
                        minest=i;
                        minestnum=p.first;
                        minesttime=p.second;
                        minestcnm=stu[node][i];
                    }
                    <span class="keyword">else</span> <span class="keyword">if</span>(p.second[node]==minesttime[node]){<span class="comment">//如果相等</span>
                        <span class="keyword">if</span>(stu[node][i]&gt;minestcnm){<span class="comment">//比较仇恨度</span>
                            minest=i;
                            minestnum=p.first;
                            minesttime=p.second;
                            minestcnm=stu[node][i];
                        }
                    }
                }
                minesttime[minest]=<span class="built_in">min</span>(minesttime[minest],now);<span class="comment">//更新到达自己的时间</span>
                <span class="keyword">return</span> {minestnum,minesttime};
            };
            cout&lt;&lt;<span class="built_in">dfs</span>(x,<span class="number">1</span>,<span class="number">-1</span>).first&lt;&lt;endl;
        }
    }
    <span class="keyword">return</span> <span class="number">0</span>;
}</code></pre></div></details></div><br><hr><br><blockquote><br>本文作者：星澜曦光<br><br>本文链接：https://blog.tsxc.xyz/posts/5bcef9d8/<br><br>版权声明：<p xmlns:cc="http://creativecommons.org/ns#">除特殊声明外，原创文章使用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/?ref=chooser-v1" target="_blank" rel="license noopener noreferrer" style="display:inline-block">CC BY-NC-SA 4.0<img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;display:inline" src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1" alt=""><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;display:inline" src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1" alt=""><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;display:inline" src="https://mirrors.creativecommons.org/presskit/icons/nc.svg?ref=chooser-v1" alt=""><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;display:inline" src="https://mirrors.creativecommons.org/presskit/icons/sa.svg?ref=chooser-v1" alt=""></a></p>转载文章按原作者要求使用。<br><br></blockquote><br><div class="end-post-meta"><span><a href="/tags/OI/index.html"><i class="fa fa-tag"></i> OI</a></span><span><a href="/tags/出题/index.html"><i class="fa fa-tag"></i> 出题</a></span></div><div class="end-post-meta"><span><i class="fa fa-refresh"></i> 最后更新：2025-02-08, 23:17</span></div></div><div class="prevnext"><a class="prev" href="/posts/981abe42/">上一页</a> <a class="next" href="/posts/4c0440c/">下一页</a></div><div class="comments"><div id="tcomment"></div><script>var twikooJs=document.createElement("script");twikooJs.src="/cdn/twikoo.all.min.js",twikooJs.onload=function(){twikoo.init({envId:"https://server.tsxc.xyz:40064/",el:"#tcomment",region:"ap-shanghai",lang:"zh-CN"})},document.body.appendChild(twikooJs)</script></div><div class="avatar-container" style="padding:50px"><img src="/img/avatar.avif" class="avatar revolve" style="height:12%;width:12%"><div style="text-align:center;margin-top:3%">By 星澜曦光.</div></div></div><div class="vertical toolbar"><div class="tab-page"><div class="tabTitle tb-tabTitle"><ul><li class="current"><i class="fa fa-random"></i></li><li><i class="fa fa-refresh"></i></li></ul></div><div class="tabContent tb-tabContent"><div><div class="title">随机文章<span class="sidetitle">回味旧文</span></div><div class="item no-lrpadding"><a class="post-link" href="/posts/b80796a6/"><div class="title_fa"><i class="fa fa-file-text-o fa-border" style="height:30px;border:none"></i><div class="title">快速认识我➡️</div></div></a><a class="post-link" href="/posts/930f060b/"><div class="title_fa"><i class="fa fa-file-text-o fa-border" style="height:30px;border:none"></i><div class="title">雨🌧</div></div></a><a class="post-link" href="/posts/65f51c0e/"><div class="title_fa"><i class="fa fa-file-text-o fa-border" style="height:30px;border:none"></i><div class="title">技术文章收藏</div></div></a><a class="post-link" href="/posts/f77810a8/"><div class="title_fa"><i class="fa fa-file-text-o fa-border" style="height:30px;border:none"></i><div class="title">随笔</div></div></a><a class="post-link" href="/posts/e7454413/"><div class="title_fa"><i class="fa fa-file-text-o fa-border" style="height:30px;border:none"></i><div class="title">演讲-物理学科学习方法分享</div></div></a><a class="post-link" href="/posts/981abe42/"><div class="title_fa"><i class="fa fa-file-text-o fa-border" style="height:30px;border:none"></i><div class="title">文章推荐</div></div></a><a class="post-link" href="/posts/5bcef9d8/"><div class="title_fa"><i class="fa fa-file-text-o fa-border" style="height:30px;border:none"></i><div class="title">【出题】恼人的英语课</div></div></a></div></div><div class="hide"><div class="title">最近更新<span class="sidetitle">旧文更新</span></div><div class="item no-lrpadding"><a class="post-link" href="/posts/b80796a6/"><div class="title_fa"><i class="fa fa-file-text-o fa-border" style="height:30px;border:none"></i><div class="title">快速认识我➡️</div></div></a><a class="post-link" href="/posts/930f060b/"><div class="title_fa"><i class="fa fa-file-text-o fa-border" style="height:30px;border:none"></i><div class="title">雨🌧</div></div></a><a class="post-link" href="/posts/e7454413/"><div class="title_fa"><i class="fa fa-file-text-o fa-border" style="height:30px;border:none"></i><div class="title">演讲-物理学科学习方法分享</div></div></a><a class="post-link" href="/posts/981abe42/"><div class="title_fa"><i class="fa fa-file-text-o fa-border" style="height:30px;border:none"></i><div class="title">文章推荐</div></div></a><a class="post-link" href="/posts/65f51c0e/"><div class="title_fa"><i class="fa fa-file-text-o fa-border" style="height:30px;border:none"></i><div class="title">技术文章收藏</div></div></a><a class="post-link" href="/posts/f77810a8/"><div class="title_fa"><i class="fa fa-file-text-o fa-border" style="height:30px;border:none"></i><div class="title">随笔</div></div></a><a class="post-link" href="/posts/5bcef9d8/"><div class="title_fa"><i class="fa fa-file-text-o fa-border" style="height:30px;border:none"></i><div class="title">【出题】恼人的英语课</div></div></a></div></div><div class="hide"></div></div></div><div class="item"><div class="title">博客信息</div><div class="list-group"><div class="list-group-item"><div><i class="fa fa-file-text-o fa-fw"></i> 文章数目</div><div class="badge">9</div></div><div class="list-group-item"><div><i class="fa fa-refresh fa-fw"></i> 最近更新</div><div class="badge">02-08</div></div><div class="list-group-item"><div><i class="fa fa-font fa-fw"></i> 本站字数</div><div class="badge">23.8k</div></div><div class="list-group-item"><div><i class="fa fa-book fa-fw"></i> 本文浏览</div><div class="badge"><span id="busuanzi_value_page_pv"></span></div></div></div></div><div class="post-toc"><div class="title">文章目录</div><div class="post-toc-inner"></div></div><script>function run_tocbot(){tocbot.init({tocSelector:".post-toc-inner",contentSelector:".post-text",headingSelector:"h1, h2, h3, h4, h5, h6",hasInnerContainers:!0})}run_tocbot()</script><script>$((function(){var i=$(".tb-tabTitle>ul>li"),t=$(".tb-tabContent>div");i.click((function(){var i=$(this);setTimeout((function(){i.addClass("current").siblings().removeClass("current");var n=i.index();t.eq(n).show().siblings().hide()}))}))}))</script></div></div><div class="footer"><p class="text-left">©2023-2025 <a target="_blank" rel="noopener" href="https://github.com/tsxc-github">星澜曦光</a>. All rights reserved.</p><p class="text-right"><a href="https://beian.miit.gov.cn/" target="_blank">蜀ICP备2025139897号</a> Theme <a target="_blank" rel="noopener" href="https://github.com/yz-hs/cutie">Cutie</a>, by Yurchiu.</p></div><script>readData("special")||$("html").addClass("none")</script><script>readData("color")||$("html").addClass("color-night"),4!=readData("color")&&readData("color")||($("body").css("opacity","0.85"),$("body").css("background-image","url(/img/night-bgp.avif)"),window.document.documentElement.setAttribute("data-theme","dark")),$("img").attr("onerror","this.src='/img/error.avif';this.onerror=null"),initial()</script></div><script rel="preload" src="/cdn/APlayer.min.js" defer></script><link rel="stylesheet" href="/cdn/APlayer.min.css"><script rel="preload" src="/cdn/MetingJS/v2.0.1/Meting.min.js" defer></script><meting-js class="meting-js appear" fixed="ture" server="netease" type="playlist" id="8699526404"></meting-js><script rel="preload" src="/cdn/MetingJS/v1.2/Meting.min.js" defer></script><script>$(document).on("DOMContentLoaded",(function(){$(document).on("pjax:end",loadMeting)}))</script><script>consolePrint(),HideIt()</script><link rel="stylesheet" href="/custom/custom.css"><script src="/custom/custom.js"></script><script async src="/cdn/font_2032782_8d5kxvn09md.js"></script><link rel="stylesheet" href="https://ai.tianli0.top/static/public/postChatUser_summary.min.css"><script>let tianliGPT_key="A-QTE6AFKKCAUB3OFSHBAASWC644QK0TBR",tianliGPT_postSelector="#article-container > div.article > div.vertical.post > div.post-text",tianliGPT_Title="文章摘要",tianliGPT_postURL="/posts/",tianliGPT_blacklist="",tianliGPT_wordLimit="1000",tianliGPT_typingAnimate=!0,tianliGPT_theme="default";var postChatConfig={backgroundColor:"#3e86f6",bottom:"16px",left:"16px",fill:"#FFFFFF",width:"44px",frameWidth:"375px",frameHeight:"600px",defaultInput:!0,upLoadWeb:!0,showInviteLink:!0,userTitle:"PostChat",userDesc:"如果你对网站的内容有任何疑问，可以来问我哦～",addButton:!0,beginningText:"这篇文章介绍了",userIcon:"https://ai.tianli0.top/static/img/PostChat.avif",userMode:"magic",defaultChatQuestions:["你好","你是谁"],defaultSearchQuestions:["视频压缩","设计"]}</script><script data-postchat_key="A-QTE6AFKKCAUB3OFSHBAASWC644QK0TBR" src="https://ai.tianli0.top/static/public/tianli_gpt.min.js"></script></body></html>